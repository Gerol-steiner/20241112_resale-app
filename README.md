# COACHTECHフリマアプリ 

## 環境構築

ここでは、COACHTECHフリマアプリをクローンし、ローカル環境で動作させるための手順を説明します。

---

### 1. プロジェクトをクローン

#### 【目的】
GitHubのリポジトリからプロジェクトをローカル環境にコピーします。

#### 【手順】
1. ターミナルで、クローンしたいディレクトリに移動します。
   ```bash
   cd /path/to/your/desired/directory
2. 以下のコマンドを実行してリポジトリをクローンします。
   ```bash
   git clone git@github.com:Gerol-steiner/20241112_resale-app.git

3. クローンしたディレクトリに移動します（必要であればディレクトリ名を変更）
   ```bash
   cd 20241112_resale-app

### 2. Dockerでコンテナを起動


#### 【目的】
アプリケーションの実行に必要なPHP、MySQL、phpMyAdmin、NginxなどをDockerで立ち上げます。

#### 【手順】
1. 以下のコマンドを実行してコンテナを構築・起動します。
   ```bash
   docker-compose up -d --build
2. コンテナが正常に起動していることを確認します。
   ```bash
   docker ps

### 3. 「.env」ファイルの設定

#### 【目的】
環境変数を定義するための`.env`ファイルを作成し、設定を適用します。

#### 【手順】
1. PHPコンテナ内に入ります。
   ```bash
   docker-compose exec php bash
2. `.env.example`ファイルをコピーして`.env`ファイルを作成します。
   ```bash
   cp .env.example .env
3. `.env`ファイルに必要な情報を入力します。
    - `DB_`セクションにデータベースの情報を入力。
    - `MAIL_`セクションにメール設定を入力。
    - `STRIPE_`セクションにStripeの公開キーと秘密キーを入力。
  
4. 補足：phpコンテナから退出したいときは、以下のコマンドで退出します。
   ```bash
   exit

### 4. Composerパッケージのインストール

#### 【目的】
アプリケーションで必要なライブラリやパッケージをインストールします。

#### 【手順】
1. PHPコンテナ内に入ります。
   ```bash
   docker-compose exec php bash
  
2. コンテナ内で以下のコマンドを実行します。
   ```bash
   composer install

### 5. アプリケーションキーの生成

#### 【目的】
アプリケーションの暗号化キーを生成します。

#### 【手順】
1. PHPコンテナ内に入ります。
   ```bash
   docker-compose exec php bash
  
2. コンテナ内で以下のコマンドを実行します。
   ```bash
   php artisan key:generate

- `.env`ファイルの`APP_KEY`が生成されていることを確認してください。
- `APP_KEY`が生成されていないときは、`.env`ファイルを閉じた状態で手順「2.」を再度実行してください。

### 6. ダミーデータ用の商品画像を移動

#### 【目的】
シードデータに対応する商品画像やプロフィール画像を適切な場所に配置します。

#### 【手順】
1. 必要に応じ、PHPコンテナから退出します。
   ```bash
   exit
  
2. コンテナ外で以下のコマンドを実行します。
   ```bash
   mv src/public/images/uploads src/storage/app/public/

### 7. ストレージリンクの作成

#### 【目的】
ストレージディレクトリをパブリックディレクトリにリンクして、Webで画像を参照できるようにします。

#### 【手順】
1. PHPコンテナ内に入ります。
   ```bash
   docker-compose exec php bash
  
2. コンテナ内で以下のコマンドを実行します。
   ```bash
   php artisan storage:link


### 8. ストレージ権限の付与

#### 【目的】
アプリケーションが`storage`ディレクトリにアクセスできるようにします。

#### 【手順】
■ Linux環境の場合:
1. PHPコンテナ内に入ります。
   ```bash
   docker-compose exec php bash
  
2. コンテナ内で以下のコマンドを実行します。
   ```bash
   chmod -R 775 storage
   chown -R www-data:www-data storage
■ その他の環境（Windows、macOS）の場合:

- ファイルシステムのGUIを使用するか、環境に応じた適切な方法でstorageディレクトリとその中のファイルに対して、Webサーバーが読み取り/書き込みできるように権限を設定してください。
- 具体的な方法はOSやサーバー設定によって異なるため、必要に応じてシステム管理者に相談するか、お使いの環境のドキュメントを参照してください。
    
※ 注意: 権限設定は適切なセキュリティを維持しつつ、アプリケーションが正常に動作するように行ってください。

### 9. データベースの準備

#### 【目的】
アプリケーションで使用するデータベースを構築します。

#### 【手順】
1. PHPコンテナ内に入ります。
   ```bash
   docker-compose exec php bash
  
2. コンテナ内で以下のコマンドを実行してマイグレーションを実行します。
   ```bash
   php artisan migrate

3. ダミーデータを作成します。
   ```bash
   php artisan db:seed
   ```

### ＜注意事項＞
1. 商品画像やプロフィール画像: 商品やプロフィール画像が正しい場所に配置されていない場合、アプリケーションが正常に動作しません。必ずダミーデータの画像をstorage/app/public/uploadsに移動してください。
2. 権限の付与: 特にstorageディレクトリへの書き込み権限が不足している場合、エラーが発生します。権限設定を確実に行ってください。
3. 環境依存: 上記の手順はLinuxを想定しています。WindowsやMacの場合、コマンドが異なる場合がありますので適宜読み替えてください。

   ---
   
## 仕様技術（実行環境）











